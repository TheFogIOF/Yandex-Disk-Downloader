<!DOCTYPE html>
<script>
    fetch(`https://cloud-api.yandex.net/v1/disk/public/resources/download?public_key=${encodeURIComponent(new URLSearchParams(location.search).get('download'))}`)
        .then(r => r.json())
        .then(data => {
            if (data.href) {
                const a = document.createElement('a');
                a.href = data.href;
                a.download = '';
                document.body.appendChild(a);
                a.click();
                setTimeout(() => window.close(), 1000);
            }
        })
        .catch(() => window.close());
</script>
